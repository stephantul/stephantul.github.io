<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>{% if page.title %}{{ page.title }}{% else %}{{ site.harmony.name }}{% endif %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="{% if page.meta_description %}{{ page.meta_description }}{% else %}{{ site.harmony.meta_description }}{% endif %}" />
    <link rel="canonical" href="{{ page.url | replace:'index.html','' | prepend: site.baseurl | prepend: site.url }}" />

    <!-- Preconnects for Google Fonts (drop these if you self-host fonts) -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

    <!-- Non-blocking Google Fonts load (preload → flip) -->
    <link
      rel="preload"
      as="style"
      href="https://fonts.googleapis.com/css2?family=Varela+Round&display=swap"
      onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Varela+Round&display=swap">
    </noscript>

    <!-- Your site CSS (non-blocking via preload → flip). 
         IMPORTANT: remove any other <link rel="stylesheet" for main.css -->
    <link
      rel="preload"
      as="style"
      href="{{ site.baseurl }}/assets/css/main.css"
      onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
      <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/main.css">
    </noscript>

    <!-- Defer scripts so they don’t hold first paint -->
    <script defer src="{{ site.baseurl }}/assets/js/modernizr.js"></script>

    <!-- Old IE shims and X-UA-Compatible removed (obsolete & add overhead) -->
  </head>
  <body class="{{ site.harmony.basetheme }}">
    <header class="main-header">
      <div class="wc-container">
        <h1><a href="{{ site.baseurl }}/">{{ site.harmony.name }}</a></h1>
        <p class="site-description">{{ site.harmony.description }}</p>
        {% include header-links.html %}
      </div>
    </header>

    {{ content }}

    <footer class="main-footer">
      <p class="wc-container disclaimer">
        {% include footer.html %}
      </p>
    </footer>
  </body>
</html>